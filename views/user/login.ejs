<!-- --include header-- -->
<%- include("../layout/layout")%>
<!-- /header -->


<% if (message.length>0) { %>
    <div id="errorMessage" class="alert alert-success text-center" style="font-weight: bold;font-size: large;">
        <%= message %>
    </div>
    <% } %>
<section>
    <div class="container mt-5 mb-5  pt-5">
        <div class="row ">
            <div class="col-md-6 mx-auto ">
                <div class="bg-light-title text-center py-3 mb-1">
                    <h2 class="mx-auto w-100">Sign In</h2>
                </div>
        

        <!-- LOGIN FORM -->
        <form id="loginForm" action="/login" method="post">
            <div class="form-group mb-2">
                <label>Email</label>
                <input type="email" class="form-control" name="email" required>
                <span class="error" id="emailError"></span>
            </div>
            <div class="form-group mb-2">
                <label>Password</label>
                <input type="password" class="form-control" name="password" required>
                <span class="error" id="passwordError"></span>
            </div>

            <button type="submit" class="btn btn-success btn-lg " >Login</button>
            <a style="text-decoration: none;"href="/forgotPassword">Forgot Password?</a>
        </form>

        <hr>

        <p>Don't you have an account? <a class="btn btn-secondary"   style="text-decoration: none; " href="/signup">SignUp</a></p>
    </div>
</div>

<!-- --include footer-- -->
<!-- <%- include("../partials/footer")%> -->
<!-- /header -->

<script>
    // Client-side form validation
    const form = document.getElementById('loginForm');

    form.addEventListener('submit', (event) => {
        const emailInput = form.elements['email'];
        const passwordInput = form.elements['password'];
        let valid = true;

        // Reset error messages
        document.getElementById('emailError').textContent = '';
        document.getElementById('passwordError').textContent = '';

        // Validate email
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(emailInput.value)) {
            document.getElementById('emailError').textContent = 'Please enter a valid email address.';
            valid = false;
        }

        // Validate password (you can add more password requirements if needed)
        if (passwordInput.value.length < 8) {
            document.getElementById('passwordError').textContent = 'Password must be at least 8 characters long.';
            valid = false;
        }

        if (!valid) {
            event.preventDefault(); // Prevent form submission if validation fails
        }
    });
</script>
<script>
    // Function to hide the error message after a certain duration
    function hideErrorMessage() {
        const errorMessage = document.getElementById('errorMessage');
        if (errorMessage) {
            errorMessage.style.display = 'none';
        }
    }

    // Hide the error message after 3000 milliseconds (3 seconds)
    setTimeout(hideErrorMessage, 3000);
</script>
